# Scan Chain

## Scan Cell (Flip-Flop, Latch)

- If SE is up (enter test mode), the data of SFF is updated from the previous SFF; otherwise, it comes from the combinational logic.
- We can observe faults in scan-output or the primary output (PO)
- SFF has two functions: ***shift*** and ***capture***

<img src="Scan%20Chain%201b7da2873a12808097ecfd7156f4976b/image.png" width=550/>

<img src="Scan%20Chain%201b7da2873a12808097ecfd7156f4976b/image%201.png" width=550/>

### Control Points

- Overhead: An Extra MUX and a DFF
- SFF: DFF + MUX

<img src="Scan%20Chain%201b7da2873a12808097ecfd7156f4976b/image%202.png" width=550/>

### Observation Points

- Overhead: An Extra MUX and a DFF
- SFF: MUX + DFF
- Pulse one clock to load the data into DFFs, then set SE=1 and scan out the data

<img src="Scan%20Chain%201b7da2873a12808097ecfd7156f4976b/image%203.png" width=550/>

## Crossing Clock Domain

- If $CK_2$ is behind $CK_1$, $CK_2$ will miss the data generated by $SC_p$ from the previous clock

### Solution_1: ***Lock-up Latch***

<img src="Scan%20Chain%201b7da2873a12808097ecfd7156f4976b/image%204.png" width=550/>

<img src="Scan%20Chain%201b7da2873a12808097ecfd7156f4976b/image%205.png" width=550/>

### Solution_2: Clock Grouping

- If two clock domains have a lots interaction (long comb circuit b/w them), they might have large ***clock skew*** b/w them, so they cannot form a scan chain.
- That means we have to find the CDs which have NO interaction b/w them

<img src="Scan%20Chain%201b7da2873a12808097ecfd7156f4976b/image%206.png" width=550/>

### Mixed negedge-/posedge-FFs

![image.png](Scan%20Chain%201b7da2873a12808097ecfd7156f4976b/image%207.png)